{"componentChunkName":"component---src-templates-post-jsx","path":"/kakao-map-api/","result":{"data":{"site":{"siteMetadata":{"title":"Lanky.Blog"}},"markdownRemark":{"id":"15bd1982-8911-5276-a3e8-1c0dc2e09f23","excerpt":"개요 카카오 Map API를 이용하여 사용자가 입력한 출발지, 목적지를 표시하고, 경로를 표시하는 기능을 구현하려고 합니다.\n모델 시나리오는 아래와 같습니다. 모델 시나리오 사용자는 출발지를 설정한다. 시스템은 지도에 출발지를 표시한다. 사용자는 목적지를 설정한다. 시스템은 지도에 목적지를 표시한다. 시스템은 사용자의 위치에서 목적지를 가는 경로를 표시한…","html":"<h1>개요</h1>\n<p>카카오 Map API를 이용하여 사용자가 입력한 출발지, 목적지를 표시하고, 경로를 표시하는 기능을 구현하려고 합니다.\n모델 시나리오는 아래와 같습니다.</p>\n<h2>모델 시나리오</h2>\n<ol>\n<li>\n<p>사용자는 출발지를 설정한다.</p>\n<ol>\n<li>시스템은 지도에 출발지를 표시한다.</li>\n</ol>\n</li>\n<li>\n<p>사용자는 목적지를 설정한다.</p>\n<ol>\n<li>시스템은 지도에 목적지를 표시한다.</li>\n</ol>\n</li>\n<li>시스템은 사용자의 위치에서 목적지를 가는 경로를 표시한다.</li>\n</ol>\n<h2>카카오 Maps API</h2>\n<p><a href=\"https://apis.map.kakao.com/web/guide/#start\">공식문서</a>에서는 HTML과 자바스크립트를 이용한 방식으로 설명되어 있습니다.\nReact에서 사용할 수 있도록 변경을 해보도록 하겠습니다.</p>\n<h2>지도 띄우기</h2>\n<p><strong>[공식문서내용]</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//dapi.kakao.com/v2/maps/sdk.js?appkey=발급받은 APP KEY를 넣으시면 됩니다.<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>[public/index.html]</strong><br>\n카카오맵 API를 로딩하는 스크립트 태그를 root보다 밑의 위치에 넣습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>//dapi.kakao.com/v2/maps/sdk.js?appkey=발급받은 APP KEY를 넣으시면 됩니다.<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>[Map.jsx]</strong><br>\nindex.html에서 등록하였기 때문에 window 객체에서 kakao 객체를 가지고 올 수 있습니다. kakao.maps.Map 메서드를 사용하여 지도를 표시할 수 있습니다.<br>\nmapOptions.center로 중심좌표도 이동시킬 수 있겠군요.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>kakao<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> window<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Map</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> mapContainer <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'map'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 지도를 표시한 곳</span>\n    <span class=\"token keyword\">const</span> mapOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 지도의 옵션</span>\n      <span class=\"token literal-property property\">center</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span><span class=\"token number\">33.450701</span><span class=\"token punctuation\">,</span> <span class=\"token number\">126.570667</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//지도의 중심좌표.</span>\n      <span class=\"token literal-property property\">level</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token comment\">//지도의 레벨(확대, 축소 정도)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">const</span> kakaoMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span>mapContainer<span class=\"token punctuation\">,</span> mapOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div\n        id<span class=\"token operator\">=</span><span class=\"token string\">\"map\"</span>\n        style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">\"800px\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">\"800px\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/672bf34b82277fc6983592e77f3f7350/26530/basic.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 99.41176470588235%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEjElEQVQ4yyWU6XPaBhDF+dv7tZ1MmzRumniSHtNcHcdOM47t+AjmMgJxSkgIXUgcEoe5wYnz4deFfNhZMcDTe/vebmKzWbBcThiMOnhhk3bXot1r4ndN+oM2y/WcdsehrlVxPJvZzGCzjpkv5rv/TacjqeGuvnxZk2h4IYNhlzgOuDE+klQ/cJ255KaYFMCQeNSlqhdQChnKVZUoSgmow3A8YDqLCUObQuGGdPpavuuR0B0f3bZZLUY02yXKZpqCmqWqFQh7jjDv4YaGAIeMJjG3Y4X53GM8GTGZRNze9un1QlzXYrGYkXDCDrlanbm8bShsGm5JgCvfu1+nE3nCpk80DOW5zXiUZzpxdwwn04EAxsJ4K3vAer0kEfT6XJdrjMcR0cjnnfGSN9qfvNX/4qDxEq9nCQMfPzRxfJPRUMGxVayWJUBbwGhXI1GyXi+2gBGZikYgtLcs/zPe8KL6mH3lV/6uPSXfTqH6OYrtLIqXZTC5YTEPhN1Yfj8S0OGubxl+uRNT/G7ETVWjYjmsZY7H1gFP1Yfsnz3hRe539quPeFr+hWeVh+yVfsbsHXE7cvH7kSQi3FXQ6+B3gp3zCbcbUzN0ys0WC5GQtz9zph1yoR5zXv7AJ/09p/L5XD/kUH3Px1KNa0UlW6hQMl2soC9GemSrTfrDCYlOv4+q1enFPZlFF6WU5jx7Qq51gWqnadoVXF+X+Wn4QYtWYHBeMNCMJtWmh265VKTnagI4EkDLb2O6DrNpRNOtoOoZslqSjHnBWes9dtfA9SwBlQosNsuidEMUSTpKda6u0+TKdVTD/c6wNxD7J32ctka9mafauEFRrymUUtQdBc0sS2iTfE6dYzoN1qsKTiDsrAC7HUqGfcqGLSxd4vGUxHo1ZSgZ0yxlB9hoFdFbBakiDYmHbhUwbHl2VRxZzVGcp9sxabW72EFHekeAO6KyzWQmsVktp3RjV+aRQ28WdsANu0TDzGOUkztQy6vtymk36fhpSmqGTKmBotvULH8nd2tKbyv5y3pFQbL2uvZcaGdFosKNeUKtkaahXmGLIdGwQzeScMuRWMyL0gXI7sgcPXHak43qUm+1v0u+k3Rf2cfslR/wTvsH3Sxyrv7LdfVI5JeEcUFmV5Eqy+xMVsuy7HYLRRjlZSG2xpQMR2bZZraQ1VuK5FPrkM+VAy6qByhmkmZLJWUci5TUjmHYc2k0q+TyWQm1jMI1OTq55Ozikk+XyZ0pVcsj2jLsxbcofpLj+is+Ga/4oL3lRHvH88qePL/B9jSJiUlNL3IjJyzuZ2SuhqxrS+5nX8wIKTZcyaElt0BmOLi9FVP6pIJTXhq/88p4zov6Hn9Uf+NZ6SFKM0k86DCeyumajblb1WQJfBpeQDjoY8vK2aHPlbyg4gnDsZyscr1GqpjjSfIBP57+wOPUT+yXH3FkvCaQvV3MJ5LVWGoo+15CFxMNr0rdVtDdIoavynjyhHFEYrNZ7Y5lPx7hxk3KgWQwquFOWtzf3/Pt61c2myV3d0u2v73/OmAwDVguFvKiqfSZ1FwO9JRv93f8D7NPgtJtXxOPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='basic' title='basic' src='/static/672bf34b82277fc6983592e77f3f7350/ca1dc/basic.png' srcset='/static/672bf34b82277fc6983592e77f3f7350/e7570/basic.png 170w,\n/static/672bf34b82277fc6983592e77f3f7350/f46e7/basic.png 340w,\n/static/672bf34b82277fc6983592e77f3f7350/ca1dc/basic.png 680w,\n/static/672bf34b82277fc6983592e77f3f7350/26530/basic.png 944w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span><br>\n짜잔! 이런 아주 심플한 지도가 완성이 되었습니다.<br>\n이제 우리가 원하는 위치로 지도를 이동시키는 방법을 알아보도록 하겠습니다.</p>\n<h2>지도 이동하기</h2>\n<p>우리는 사용자가 주소를 입력하면 해당 위치로 지도를 이동시키는 기능을 필요로 합니다.<br>\n이 기능을 잘게 쪼개보면 다음과 같습니다.</p>\n<ol>\n<li>주소를 입력한다. => 위도, 경도를 입력한다.</li>\n<li>해당 위치로 지도를 이동시킨다. => 1번에서 입력한 위도, 경도를 중심점을 갖는 맵을 표시한다.</li>\n</ol>\n<p>이렇게 볼 수 있겠군요. 1번 프로세스를 했다고 간주하고 2번 프로세스를 해보도록 하죠.<br>\n버튼을 하나 생성합니다. 그리고 버튼을 누르면 지도를 이동시켜봅시다.</p>\n<p>변경되는건 위도, 경도이니 이 친구들을 state로 해서 변경하면 되겠군요.</p>\n<p><strong>[Map.jsx]</strong><br>\n버튼을 누르면 state.center의 값을 set합니다. useEffect의 dependency를 부여하여 스스로 변경될 수 있도록 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Map</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">center</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token number\">33.452613</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token number\">126.570888</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> mapContainer <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'map'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> mapOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">center</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">.</span>lat<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">.</span>lng<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// </span>\n      <span class=\"token literal-property property\">level</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> kakaoMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span>mapContainer<span class=\"token punctuation\">,</span> mapOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">.</span>lat<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">.</span>lng<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"map\"</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">\"800px\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">\"800px\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">center</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token number\">33.45058</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token number\">126.574942</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>지도 중심좌표 이동시키기<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><img src=\"/static/center_move-6d722c26b44f1ca25a93aa97cc38e5f1.gif\"></p>\n<p>짜잔2!! 이렇게 지도의 중심이동을 할 수 있습니다. 그런데 스무스하게 이동하는 느낌보다는 벅벅 거리는 느낌이네요.<br>\n부드럽게 이동하는 방법을 찾아봐야겠습니다.</p>\n<h2>부드럽게 지도 이동하기</h2>\n<p>먼저 공식문서에 있는 지도 이동시키기를 보도록 하겠습니다.</p>\n<blockquote>\n<p>지도 객체의 메소드를 통해 지도를 원하는 좌표로 이동시킬 수 있습니다.<br>\n또, 지도가 표시되고 있는 영역크기를 벗어나지 않는 거리라면 애니메이션 효과처럼 지도를 부드럽게 이동시킬 수 있습니다.</p>\n</blockquote>\n<p>지도 객체라.. 코드를 봐야 감이 잡힐듯합니다.</p>\n<p><strong>[공식문서]</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> mapContainer <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'map'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 지도를 표시할 div </span>\n    mapOption <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> \n        <span class=\"token literal-property property\">center</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span><span class=\"token number\">33.450701</span><span class=\"token punctuation\">,</span> <span class=\"token number\">126.570667</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 지도의 중심좌표</span>\n        <span class=\"token literal-property property\">level</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token comment\">// 지도의 확대 레벨</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span>mapContainer<span class=\"token punctuation\">,</span> mapOption<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 지도를 생성합니다</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">setCenter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>            \n    <span class=\"token comment\">// 이동할 위도 경도 위치를 생성합니다 </span>\n    <span class=\"token keyword\">var</span> moveLatLon <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span><span class=\"token number\">33.452613</span><span class=\"token punctuation\">,</span> <span class=\"token number\">126.570888</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// 지도 중심을 이동 시킵니다</span>\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">setCenter</span><span class=\"token punctuation\">(</span>moveLatLon<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">panTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> moveLatLon <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span><span class=\"token number\">33.450580</span><span class=\"token punctuation\">,</span> <span class=\"token number\">126.574942</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// 지도 중심을 부드럽게 이동시킵니다</span>\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">panTo</span><span class=\"token punctuation\">(</span>moveLatLon<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>            \n<span class=\"token punctuation\">}</span> </code></pre></div>\n<p>map 객체의 메서드를 이동하는 군요. 공식문서의 setCenter 함수와 panTo 함수를 버튼의 onClick 이벤트로 설정하면 되겠네요.\n하지만 문제는 우리의 코드에는 map 객체가 useEffect 안에 있기 때문에 각 함수들을 map을 알 수가 없습니다.\n그럼 어떻게 해야할까요?</p>\n<blockquote>\n<p>React에서 값이 변하는 것은 State!</p>\n</blockquote>\n<p>우리는 map 객체가 변한다는 사실을 알고 있습니다. 그렇다면 map 객체를 state로 하면 되겠군요. 반영해보도록 하겠습니다.</p>\n<p><strong>[Map.jsx]</strong><br>\n버튼의 onClick 이벤트에 setCenter함수와 panTo함수를 호출하는 방식을 사용했습니다. 각 함수에 이동해야하는 좌표를 파라미터로 넘겼습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Map</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>map<span class=\"token punctuation\">,</span> setMap<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> mapContainer <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'map'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> mapOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">center</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span><span class=\"token number\">33.450701</span><span class=\"token punctuation\">,</span> <span class=\"token number\">126.570667</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//지도의 중심좌표.</span>\n      <span class=\"token literal-property property\">level</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token comment\">//지도의 레벨(확대, 축소 정도)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> kakaoMap <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span>mapContainer<span class=\"token punctuation\">,</span> mapOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setMap</span><span class=\"token punctuation\">(</span>kakaoMap<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">setCenter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>lat<span class=\"token punctuation\">,</span> lng<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> moveLatLon <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span>lat<span class=\"token punctuation\">,</span> lng<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">setCenter</span><span class=\"token punctuation\">(</span>moveLatLon<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">panTo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>lat<span class=\"token punctuation\">,</span> lng<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> moveLatLon <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span>lat<span class=\"token punctuation\">,</span> lng<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">panTo</span><span class=\"token punctuation\">(</span>moveLatLon<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"map\"</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">\"450px\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">\"450px\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">\"flex\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">gap</span><span class=\"token operator\">:</span> <span class=\"token string\">\"10px\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCenter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token number\">33.452613</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token number\">126.570888</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          지도 중심좌표 이동시키기\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">panTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token number\">33.45058</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token number\">126.574942</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          지도 중심좌표 부드럽게 이동시키기\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"/static/center_smooth_move-95968767427b3c606417e11273dd49a4.gif\"><br>\n오~ 스무스~ 부드럽게 이동을 합니다. 좌표가 입력되면 스무스하게 이동시킬 수 있겠습니다. (단, 지도범위를 벗어나지 않는다면요)<br>\n입력창에 좌표를 입력하여 이동하는 것은 다른 단계에서 같이 하도록 하겠습니다.\n이제는 지도 상에 특정 좌표를 표시하는 것을 해보죠.</p>\n<h2>지도 위에 마커 표시하기</h2>\n<p>지도에 올라가는 핀 모양의 이미지를 마커라고 부릅니다. 우리는 출발지, 목적지를 마커로 표시할 겁니다.\n먼저 공식문서를 보도록 하지요.</p>\n<p><strong>[공식문서]</strong><br>\nmarker 객체를 생성하여 setMap 메서드의 파라미터에 따라 마커를 표시할 수 있고 제거할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// map 객체 생성 후</span>\n<span class=\"token keyword\">var</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></span>\n<span class=\"token comment\">// 마커가 표시될 위치입니다 </span>\n<span class=\"token keyword\">var</span> markerPosition  <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span><span class=\"token number\">33.450701</span><span class=\"token punctuation\">,</span> <span class=\"token number\">126.570667</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n\n<span class=\"token comment\">// 마커를 생성합니다</span>\n<span class=\"token keyword\">var</span> marker <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Marker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> markerPosition\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 마커가 지도 위에 표시되도록 설정합니다</span>\nmarker<span class=\"token punctuation\">.</span><span class=\"token function\">setMap</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 아래 코드는 지도 위의 마커를 제거하는 코드입니다</span>\nmarker<span class=\"token punctuation\">.</span><span class=\"token function\">setMap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    </code></pre></div>\n<p>사용자가 출발지, 목적지를 입력하면 그 좌표에 마커를 보여주는 겁니다. 출발지와 목적지의 marker 객체, 위도, 경도를 담는 state를 생성합니다.<br>\n이 state가 바뀔 때마다 지도에 마커를 marker 객체의 setMap 메서드를 이용하여 map에 표시합니다.</p>\n<p>그렇다면 우리 코드에서는 어떻게 적용할 수 있을까요?\n잠시 프로세스를 확인해보겠습니다.</p>\n<ol>\n<li>\n<p>사용자가 (출발지 또는 목적지) 주소를 입력한다.</p>\n<ol>\n<li>시스템은 지도의 중심점을 주소의 좌표로 이동시킨다.</li>\n<li>시스템은 마커를 표시한다.</li>\n</ol>\n</li>\n<li>\n<p>사용자가 주소를 변경한다.</p>\n<ol>\n<li>시스템은 지도의 중심점을 주소의 좌표로 이동시킨다.</li>\n<li>시스템은 기존 마커를 제거한다.</li>\n<li>시스템은 마커를 표시한다.</li>\n</ol>\n</li>\n</ol>\n<p>이 프로세스에 맞춰서 코딩을 해봅시다.</p>\n<p><strong>[Map.jsx]</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Map</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>map<span class=\"token punctuation\">,</span> setMap<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>pointObj<span class=\"token punctuation\">,</span> setPointObj<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">startPoint</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">marker</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">endPoint</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">marker</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// 기존 useEffect는 유지합니다.</span>\n   \n  <span class=\"token comment\">// pointObj의 변경이 있을 때마다 출발지와 목적지의 marker를 map에 표시해줍니다.</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> point <span class=\"token keyword\">in</span> pointObj<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pointObj<span class=\"token punctuation\">[</span>point<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>marker<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        pointObj<span class=\"token punctuation\">[</span>point<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>marker<span class=\"token punctuation\">.</span><span class=\"token function\">setMap</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>pointObj<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n   <span class=\"token comment\">// 부드럽게 중심점을 이동시키는 메서드만 따로 빼보았습니다.</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">setCenter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>lat<span class=\"token punctuation\">,</span> lng<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> moveLatLon <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span>lat<span class=\"token punctuation\">,</span> lng<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    map<span class=\"token punctuation\">.</span><span class=\"token function\">panTo</span><span class=\"token punctuation\">(</span>moveLatLon<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token keyword\">function</span> <span class=\"token function\">setPoint</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>lat<span class=\"token punctuation\">,</span> lng<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> pointType</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setCenter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>lat<span class=\"token punctuation\">,</span> lng<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> marker <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Marker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">position</span><span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span>lat<span class=\"token punctuation\">,</span> lng<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token function\">setPointObj</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pointObj<span class=\"token punctuation\">[</span>pointType<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>marker <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// 주소가 변경되었을 때 기존 marker를 제거합니다.</span>\n           prev<span class=\"token punctuation\">[</span>pointType<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>marker<span class=\"token punctuation\">.</span><span class=\"token function\">setMap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>prev<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>pointType<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>marker<span class=\"token punctuation\">,</span> lat<span class=\"token punctuation\">,</span> lng<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n       <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"map\"</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token string\">\"450px\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">\"450px\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n       <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">display</span><span class=\"token operator\">:</span> <span class=\"token string\">\"flex\"</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">gap</span><span class=\"token operator\">:</span> <span class=\"token string\">\"10px\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setPoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token number\">33.452613</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token number\">126.570888</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'startPoint'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n             출발지<span class=\"token number\">1</span> 지정\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setPoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">lat</span><span class=\"token operator\">:</span> <span class=\"token number\">33.45058</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">lng</span><span class=\"token operator\">:</span> <span class=\"token number\">126.574942</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'endPoint'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n             목적지<span class=\"token number\">1</span> 설정\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n       <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>공식문서를 참고하여 marker 객체를 생성할 때 출발지와 목적지의 마커를 다르게 하면 더 보기 좋을 것 같습니다.<br>\n해당 코드는 레파지토리에 가서 확인하시기 바랍니다.\n우리는 지금까지 많은 기능들을 구현했습니다. 거의 다 왔군요. 이제 이 프로젝트의 꽃인 경로표시를 해보도록 하겠습니다.</p>\n<h2>경로표시하기 (폴리라인 만들기)</h2>\n<p>우리는 출발지부터 목적지가 까지는 가는 경로를 지도 위에 표시할 겁니다.<br>\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 476px; '>\n      <a class='gatsby-resp-image-link' href='/static/6edbe3ec19e428cfe1179b5bd77b5a51/09261/polyline.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 42.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB2klEQVQozzWSSWvbUBRG/f+XLXTVUmgXIaQQaMDQQgNO4kmWrXqSLMsarMGa9RSnodDN6bVKFxfe4t3DN9yeUjmn1GdpTVjtpt38f4fJgSQNiE4+h8ChLCa8ni0a1dA0GXWd8fKiulGqpKpSeqrJZckTyJiVgJaWAHdaN0ES4McucWITpyF93ebbeInj7DifawHk6PqM6XTC09MDSeLTay8Ks0AAOivbYLPX2OyGmNaAOjHw7XsWj9fsjT6mM+YQ+2R52ils24owdPE8myBwKS8KizKlLiPW2zvm808Yoy8sRtekgUZVOJjmiIfhQFQ8Ugc3/GmG1GK5bgqBHWRHE5Ua2+2K+BTS00yH1yYg8B6Zm335MGRmaPiRSy6W3MjuIinrkqyc86ua0kYz6tyhaWuxGeL7DlkWc+mjN1gsRaoE3JRY3hrTMzDdOZb7k6OUklcnsiIkySKxOuH5LPAipU1mqGSBEutKVVJQ3sXQG602EvyRZ5Xxff+Vm81nbs0rbq0rrGhNIpl5RwvHM8lSKcrXsGwb9VyjMos2nlJXsRSU/QPqG5P1weX3WfFj3+e98YaP+js+6G958u9ZRjqL44RZMCWpxry++OJGYHIdTduIukLeRafycjp/AQvOPAwknSpBAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='polyline.png' title='polyline.png' src='/static/6edbe3ec19e428cfe1179b5bd77b5a51/09261/polyline.png' srcset='/static/6edbe3ec19e428cfe1179b5bd77b5a51/e7570/polyline.png 170w,\n/static/6edbe3ec19e428cfe1179b5bd77b5a51/f46e7/polyline.png 340w,\n/static/6edbe3ec19e428cfe1179b5bd77b5a51/09261/polyline.png 476w' sizes='(max-width: 476px) 100vw, 476px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>polyline.png</figcaption>\n  </figure></p>\n<p>노란색 선처럼 지도 위에 선을 그리는 것을 폴리라인이라고 부릅니다.<br>\n폴리라인은 점과 점을 이어서 선으로 표시합니다. 먼저 공식문서를 보고 설명을 이어가도록 하죠.</p>\n<p><strong>[공식문서]</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 선을 구성하는 좌표 배열입니다. 이 좌표들을 이어서 선을 표시합니다</span>\n<span class=\"token keyword\">var</span> linePath <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span><span class=\"token number\">33.452344169439975</span><span class=\"token punctuation\">,</span> <span class=\"token number\">126.56878163224233</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span><span class=\"token number\">33.452739313807456</span><span class=\"token punctuation\">,</span> <span class=\"token number\">126.5709308145358</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span><span class=\"token number\">33.45178067090639</span><span class=\"token punctuation\">,</span> <span class=\"token number\">126.5726886938753</span><span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 지도에 표시할 선을 생성합니다</span>\n<span class=\"token keyword\">var</span> polyline <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Polyline</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> linePath<span class=\"token punctuation\">,</span> <span class=\"token comment\">// 선을 구성하는 좌표배열 입니다</span>\n    <span class=\"token literal-property property\">strokeWeight</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 선의 두께 입니다</span>\n    <span class=\"token literal-property property\">strokeColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#FFAE00'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 선의 색깔입니다</span>\n    <span class=\"token literal-property property\">strokeOpacity</span><span class=\"token operator\">:</span> <span class=\"token number\">0.7</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다</span>\n    <span class=\"token literal-property property\">strokeStyle</span><span class=\"token operator\">:</span> <span class=\"token string\">'solid'</span> <span class=\"token comment\">// 선의 스타일입니다</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 지도에 선을 표시합니다 </span>\npolyline<span class=\"token punctuation\">.</span><span class=\"token function\">setMap</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </code></pre></div>\n<p>linePath 좌표 배열을 이용하여 polyline 객체를 생성합니다. 그리고 setMap 메서드로 지도 위에 표시합니다.<br>\nlinePath 좌표 배열의 각 요소는 좌표로 이루어져있군요. 또한 kakao.maps.Polyline의 옵션에서 선을 정의할 수도 있습니다.</p>\n<p>그럼 linePath는 어디서 받아야 할까요? 출발지와 목적지로만 구성을 할 수 있을까요?<br>\n그렇게 된다면 출발지와 목적지를 직선으로 이어버릴 겁니다. 경로가 비행기라면 가능하겠네요 😅</p>\n<p>길찾기 기능이 있는 지도를 보시면 사람 또는 운행수단이 이동할 수 있는 경로를 보여줍니다.<br>\n예를 들어, 현재 위치에서 목적지를 가는 방법이 편의점 앞에서 좌회전이라고 해보죠. 좌표 배열은 아래와 같이 나올 것입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">var</span> linePath <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n   현재 좌표<span class=\"token punctuation\">,</span>\n   편의점 좌표<span class=\"token punctuation\">,</span>\n   목적지 좌표\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 되면 현재 좌표에서 편의점 좌표까지 선을 긋고 편의점 좌표에서 목적지 좌표까지 선을 이어버립니다. 그럼 경로로 표시가 되겠군요.</p>\n<p>우리는 이제 길찾기 API를 이용하여 출발지에서 목적지까지 가는 경로(좌표 배열)을 구하면 됩니다.<br>\n카카오맵이니까 카카오모빌리티에서 제공하는 API를 사용해보겠습니다.</p>\n<h2>카카오모빌리티 자동차 길찾기 API</h2>\n<p>카카오모빌리티 자동차 길찾기 API의 <a href=\"https://developers.kakaomobility.com/docs/navi-api/directions/\">공식문서</a>를 확인해보겠습니다.</p>\n<p>대부분 API 공식문서는 아래와 같이 구성됩니다.</p>\n<ul>\n<li>호출방식 : Method(GET, POST 등), URL</li>\n<li>요청헤더 : Authorization(API 키), Content-Type</li>\n<li>요청파라미터 : name=요청값 (필수도 있고 선택도 있음)</li>\n</ul>\n<p>꼭 요청 코드 예제를 확인하시기 바랍니다. ( 사용하다보면 아~~~ 하게 됩니다 )</p>\n<p><strong>[Map.jsx]</strong><br>\n경로 구하기 버튼에 생성합니다. 버튼에 onClick 이벤트를 설정하고 콜백함수로 아래 함수를 할당합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getCarDirection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token constant\">REST_API_KEY</span> <span class=\"token operator\">=</span> <span class=\"token string\">'REST_API_KEY'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 호출방식의 URL을 입력합니다.</span>\n    <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> <span class=\"token string\">'https://apis-navi.kakaomobility.com/v1/directions'</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token comment\">// 출발지(origin), 목적지(destination)의 좌표를 문자열로 변환합니다.</span>\n    <span class=\"token keyword\">const</span> origin <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pointObj<span class=\"token punctuation\">.</span>startPoint<span class=\"token punctuation\">.</span>lng<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pointObj<span class=\"token punctuation\">.</span>startPoint<span class=\"token punctuation\">.</span>lat<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span> \n    <span class=\"token keyword\">const</span> destination <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pointObj<span class=\"token punctuation\">.</span>endPoint<span class=\"token punctuation\">.</span>lng<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pointObj<span class=\"token punctuation\">.</span>endPoint<span class=\"token punctuation\">.</span>lat<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">// 요청 헤더를 추가합니다.</span>\n    <span class=\"token keyword\">const</span> headers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">Authorization</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">KakaoAK </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">REST_API_KEY</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token string-property property\">'Content-Type'</span><span class=\"token operator\">:</span> <span class=\"token string\">'application/json'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n    <span class=\"token comment\">// 표3의 요청 파라미터에 필수값을 적어줍니다.</span>\n    <span class=\"token keyword\">const</span> queryParams <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URLSearchParams</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">origin</span><span class=\"token operator\">:</span> origin<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">destination</span><span class=\"token operator\">:</span> destination\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">const</span> requestUrl <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">?</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>queryParams<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 파라미터까지 포함된 전체 URL</span>\n\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>requestUrl<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> headers\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>response<span class=\"token punctuation\">.</span>ok<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">HTTP error! Status: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>response<span class=\"token punctuation\">.</span>status<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Error:'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>먼저 data가 어떻게 내려오는지 확인해볼까요?<br>\n두근두근한 마음으로 출발지와 목적지를 설정하고 버튼을 누르면 공식문서의 응답코드 예제처럼 나오면 성공입니다.<br>\n성공하셨다면 반환된 data와 공식문서의 응답 객체를 비교하면서 어떤 정보가 반환되는지 꼭 확인하세요.</p>\n<p>이 프로젝트에서는 대안 경로 제공 여부(alternatives)를 미제공으로 하였고 경유지를 설정하지 않았습니다.<br>\n그래서 data.routes의 길이는 1이고, data.routes[0].sections도 길이가 1입니다.<br>\ndata.routes[0].sections[0] 배열의 구성요소를 보면 roads(도로정보), guides(안내정보) 안에 우리가 원하는 정보가 있을 것 같군요.<br>\n확인을 해보니까 guides(안내정보) 안에 있는 x, y로 폴리라인을 구성하면 건물 위로 지나다니더군요. 아무래도 아닌 것 같습니다.</p>\n<p>ata.routes[0].sections[0].roads.vertexes 배열을 정리를 해보면 될 듯합니다.</p>\n<p><strong>[Map.jsx getCarDirection 함수 안]</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">  <span class=\"token comment\">// const data = await response.json();</span>\n\n  <span class=\"token keyword\">const</span> linePath <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  data<span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>sections<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>roads<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">router</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    router<span class=\"token punctuation\">.</span>vertexes<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">vertex<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n       <span class=\"token comment\">// x,y 좌표가 우르르 들어옵니다. 그래서 인덱스가 짝수일 때만 linePath에 넣어봅시다.</span>\n       <span class=\"token comment\">// 저도 실수한 것인데 lat이 y이고 lng이 x입니다.</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        linePath<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>LatLng</span><span class=\"token punctuation\">(</span>router<span class=\"token punctuation\">.</span>vertexes<span class=\"token punctuation\">[</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> router<span class=\"token punctuation\">.</span>vertexes<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> polyline <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">kakao<span class=\"token punctuation\">.</span>maps<span class=\"token punctuation\">.</span>Polyline</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> linePath<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">strokeWeight</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">strokeColor</span><span class=\"token operator\">:</span> <span class=\"token string\">'#000000'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">strokeOpacity</span><span class=\"token operator\">:</span> <span class=\"token number\">0.7</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">strokeStyle</span><span class=\"token operator\">:</span> <span class=\"token string\">'solid'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n  polyline<span class=\"token punctuation\">.</span><span class=\"token function\">setMap</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>짜잔3!</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/97cfa03492ebf6411cae66f64bfa65e2/bc563/result.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 52.94117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaUlEQVQozzWSyW7jVhBF+f9/kEWQRRbZBdkEDThG3LYGyxo4T4/zIykONilZbne2JyV1siig8Ia6Q11jZ65wnBcC/57LueB0mrhcZr59O3N5fyMqNVldSz9ybHPqStHWKbVWjEct9zse4j9Z5n/h1FsM29vzFNR8ebzHDWwZNtH3DWkaU1UZXl4xz70ADXTHEl/A7f0C57AkUSFrP2GYtJCZ+DjPGFvzmV/vQ+5WC7zYFyYTbatxXZNEhsZVLcP+H1hQ5iFlFkj5pJnCCkvOAngFneYOIy1DYeMTBvfMU8pZBtZ1hu87NE3JLiroxyPn88CxydFlTKMT2iYT+TFjXzL0mpPcX4caw9gynUb84BGtffk43WT/8HGmHXv2SvPxMfE6NnTiY99mDF1564euup3P8yB/XzGyNiLSHo4wtK2nm3dFEVMWiqpMxCefu8UGpQLpPazDM6vlV/a7lSzSxPdMWVDB5+dFSJwwfvN+5hf7J57SP0RSRpimRInCi0IiFfPieGws5yazEcmOteHrwx3bzYI4solDW/ol41CLoneMnXpiqx5ZCJqdNkRFi5/V7MJCKifRDXnbCformTBvJDJDV4hvV8nZzUPb3IgaxbvEzMhTRRgFssVAhim2rmK9MzmEGc9uQlppASr5fD/y4BT8vi4YG7FFtl0V0W1JUSCJiF3++X7B2FsrXqxn3t5ctCDGwjDMKgIpL63ohiMHVVB3Lf3bKG/0bbu+fc3jEtdck0QOf69XDHODkVQeqY4k/WJwYAmzAi8pMaOcg9Sx7yiaBkvO/P9Cfo3J1dMfEUrRYsWX5ZaodvkXW1oRWVBh1K4AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='result.png' title='result.png' src='/static/97cfa03492ebf6411cae66f64bfa65e2/ca1dc/result.png' srcset='/static/97cfa03492ebf6411cae66f64bfa65e2/e7570/result.png 170w,\n/static/97cfa03492ebf6411cae66f64bfa65e2/f46e7/result.png 340w,\n/static/97cfa03492ebf6411cae66f64bfa65e2/ca1dc/result.png 680w,\n/static/97cfa03492ebf6411cae66f64bfa65e2/bc563/result.png 736w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>result.png</figcaption>\n  </figure></p>\n<p>이렇게 검은색으로 선이 그려졌다면 제대로 한 것입니다. 👏👏👏 옵션을 바꾸어서 원하는대로 변경할 수 있습니다.<br>\ngetCarDirection 함수에서 출발지와 목적지가 설정이 되지 않았다면 바로 return 될 수 있도록 하는 것도 좋을 듯합니다.</p>\n<h2>추가로 적용하면 좋을 것들</h2>\n<p>이 글에서는 설명하지 못했지만 추가적으로 아래 기능을 추가하려고 합니다.</p>\n<ol>\n<li>사용자가 주소를 입력하는 기능 : 주소를 입력 받으면 좌표로 변환하기</li>\n<li>리셋기능 : 경로 구하기 후 출발지 또는 목적지가 변경되었을 때 기존 폴리라인 삭제 후 다시 폴리라인를 지도에 표시</li>\n<li>출발지, 목적지 마커 변경</li>\n<li>경로가 표시되고 있는 지도범위를 벗어났을 경우 : 길찾기 API의 응답값 중에 모든 경로를 포함하는 바운딩 박스에 맞춰서 지도 영역 변경 (공식문서의 지도 범위 재설정 하기 참고)</li>\n</ol>\n<h1>마무리</h1>\n<p>카카오 지도 API와 카카오 모빌리티 길찾기 API를 이용하여 좌표와 경로를 표시해 보았습니다. 그래도 회사 프로젝트를 통해 경험한 적이 있어서 그런지 겁이 나지 않더군요.<br>\n마커, 인포윈도우, 폴리라인 객체를 생성하고 Map 객체의 메서드를 이용하여 지도에 표시하는 방식은 Google Maps API도 이와 비슷합니다. 다른 지도 API도 비슷하겠죠. 🤣</p>\n<p>더 좋은 글로 다시 인사드리겠습니다.</p>","frontmatter":{"title":"카카오 Maps API를 이용하여 경로 표시하기","date":"May 14, 2023","update":"May 14, 2023","tags":["kakao-maps-api","카카오맵 api","길찾기 api","카카오모빌리티 길찾기","react","react 지도 api"],"series":""},"fields":{"slug":"/kakao-map-api/","readingTime":{"minutes":20.97}}},"seriesList":{"edges":[{"node":{"id":"15bd1982-8911-5276-a3e8-1c0dc2e09f23","fields":{"slug":"/kakao-map-api/"},"frontmatter":{"title":"카카오 Maps API를 이용하여 경로 표시하기"}}}]},"previous":{"fields":{"slug":"/custom-hook/"},"frontmatter":{"title":"정체 모를 함수에서 훅 사용은 자제 부탁드릴께요 🙏(Feat.인스타감성)"}},"next":{"fields":{"slug":"/useing-mobx-correctly/"},"frontmatter":{"title":"제대로 MobX를 사용하고 있습니까?"}}},"pageContext":{"id":"15bd1982-8911-5276-a3e8-1c0dc2e09f23","series":"","previousPostId":"f69942f3-8e47-5ac5-b493-bb9ba32d41b9","nextPostId":"31de2775-a601-59bc-8c08-d1ec78a276d2"}},"staticQueryHashes":[]}